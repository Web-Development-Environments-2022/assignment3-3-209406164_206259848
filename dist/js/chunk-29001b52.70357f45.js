(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29001b52"],{37906:function(e,r,t){"use strict";t.r(r);var i=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"container"},[t("br"),t("b-card",{attrs:{"border-variant":"secondary","header-border-variant":"secondary",header:"Search",align:"center"}},[t("b-card-text",[t("b-form",{on:{submit:function(r){return r.preventDefault(),e.onSearch(r)},reset:function(r){return r.preventDefault(),e.onReset(r)}}},[t("b-form-group",{attrs:{id:"input-group-recipename","label-cols-sm":"3",label:"Recipe Name:","label-for":"recipename"}},[t("b-form-input",{attrs:{id:"recipename",type:"text",state:e.validateState("recipename")},model:{value:e.$v.form.recipename.$model,callback:function(r){e.$set(e.$v.form.recipename,"$model",r)},expression:"$v.form.recipename.$model"}}),e.$v.form.recipename.required?e._e():t("b-form-invalid-feedback",[e._v(" Recipe name is required ")])],1),t("b-form-group",{attrs:{id:"input-group-cuisine","label-cols-sm":"3",label:"Cuisine:","label-for":"cuisine"}},[t("b-form-select",{attrs:{id:"cuisine",options:e.cuisines,state:e.validateState("cuisine")},model:{value:e.$v.form.cuisine.$model,callback:function(r){e.$set(e.$v.form.cuisine,"$model",r)},expression:"$v.form.cuisine.$model"}}),t("b-form-invalid-feedback",[e._v(" Cuisine is required ")])],1),t("b-form-group",{attrs:{id:"input-group-diet","label-cols-sm":"3",label:"Diet:","label-for":"diet"}},[t("b-form-select",{attrs:{id:"diet",options:e.diets,state:e.validateState("diet")},model:{value:e.$v.form.diet.$model,callback:function(r){e.$set(e.$v.form.diet,"$model",r)},expression:"$v.form.diet.$model"}}),t("b-form-invalid-feedback",[e._v(" Diet is required ")])],1),t("b-form-group",{attrs:{id:"input-group-intolerance","label-cols-sm":"3",label:"Intolerance:","label-for":"intolerance"}},[t("b-form-select",{attrs:{id:"intolerance",options:e.intolerances,state:e.validateState("intolerance")},model:{value:e.$v.form.intolerance.$model,callback:function(r){e.$set(e.$v.form.intolerance,"$model",r)},expression:"$v.form.intolerance.$model"}}),t("b-form-invalid-feedback",[e._v(" Intolerance is required ")])],1),t("b-form-group",{attrs:{id:"input-group-resnum","label-cols-sm":"3",label:"Result number:","label-for":"resnum"}},[t("b-form-select",{attrs:{id:"resnum",options:["5","10","15"],state:e.validateState("resnum")},model:{value:e.$v.form.resnum.$model,callback:function(r){e.$set(e.$v.form.resnum,"$model",r)},expression:"$v.form.resnum.$model"}}),t("b-form-invalid-feedback",[e._v(" Result number is required ")])],1),t("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Reset")]),t("b-button",{staticClass:"ml-5 ",staticStyle:{width:"250px"},attrs:{type:"submit",variant:"primary"}},[e._v("Search")])],1),this.no_res?t("b-alert",{staticClass:"mt-2",attrs:{variant:"warning",dismissible:"",show:""}},[e._v(" 0 results found. ")]):e._e()],1)],1),t("div",[t("br"),t("br"),this.show_recipes?t("b-card",{attrs:{"border-variant":"secondary","header-border-variant":"secondary",header:"Sorting options",align:"center"}},[t("b-card-text",[t("b-form",{on:{submit:function(r){return r.preventDefault(),e.Sort(r)}}},[t("b-form-group",{attrs:{id:"input-group-sortpick","label-cols-sm":"3",label:"Sorting options","label-for":"sortpick"}},[t("b-form-select",{attrs:{id:"sortpick",options:["None","Likes","Time to make"],state:e.validateState("sortpick")},model:{value:e.$v.form.sortpick.$model,callback:function(r){e.$set(e.$v.form.sortpick,"$model",r)},expression:"$v.form.sortpick.$model"}}),t("b-form-invalid-feedback",[e._v(" Sort type is required ")])],1),t("b-button",{staticClass:"ml-5 w-75",staticStyle:{width:"250px"},attrs:{type:"submit",variant:"primary"}},[e._v("Sort")])],1)],1)],1):e._e(),t("br"),t("br"),this.show_recipes?t("RecipeViewerList",{attrs:{isPreview:!1,recipes:this.recipes,show_ing_and_serv:!1,title:"Search results"}}):e._e()],1)],1)},s=[],n=t("c7eb"),o=t("1da1"),a=t("2909"),c=(t("ac1f"),t("841c"),t("e9c4"),t("4795"),t("4e82"),["Any","African","American","British","Cajun","Caribbean","Chinese","Eastern European","European","French","German","Greek","Indian","Irish","Italian","Japanese","Jewish","Korean","Latin American","Mediterranean","Mexican","Middle Eastern","Nordic","Southern","Spanish","Thai","Vietnamese"]),l=["Any","Gluten Free","Ketogenic","Vegetarian","Lacto-Vegetarian","Ovo-Vegetarian","Vegan","Pescetarian","Paleo","Primal","Low FODMAP","Whole30"],u=["Any","Dairy","Egg","Gluten","Grain","Peanut","Seafood","Sesame","Shellfish","Soy","Sulfite","Tree Nut","Wheat"],d=t("b5ae"),m=t("02de"),p={name:"Search",data:function(){return{form:{recipename:"",cuisine:"Any",diet:"Any",intolerance:"Any",resnum:"5",submitError:void 0,sortpick:"None"},cuisines:[{value:null,text:"",disabled:!0}],diets:[{value:null,text:"",disabled:!0}],intolerances:[{value:null,text:"",disabled:!0}],errors:[],validated:!1,show_recipes:!1,no_res:!1}},validations:{form:{recipename:{required:d["required"],length:function(e){return Object(d["minLength"])(1)(e)&&Object(d["maxLength"])(50)(e)}},cuisine:{required:d["required"]},diet:{required:d["required"]},intolerance:{required:d["required"]},resnum:{required:d["required"]},sortpick:{required:d["required"]}}},mounted:function(){var e,r,t;(e=this.cuisines).push.apply(e,Object(a["a"])(c)),(r=this.diets).push.apply(r,Object(a["a"])(l)),(t=this.intolerances).push.apply(t,Object(a["a"])(u)),this.show_recipes=!1,sessionStorage.username&&(console.log("sessionStorage.username PRE"),console.log(sessionStorage.username),console.log("sessionStorage.search PRE"),console.log(sessionStorage.search),sessionStorage.search&&(this.recipes=JSON.parse(sessionStorage.search),this.show_recipes=!0))},methods:{validateState:function(e){var r=this.$v.form[e],t=r.$dirty,i=r.$error;return t?!i:null},Search:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function r(){var t,i;return Object(n["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,e.no_res=!1,"any"==e.form.cuisine&&(e.cuisine=void 0),"any"==e.form.diet&&(e.diet=void 0),"any"==e.form.intolerance&&(e.intolerance=void 0),r.next=7,e.axios.post("https://foodisgood.cs.bgu.ac.il/recipes/search",{query:e.form.recipename,cuisine:e.form.cuisine,diet:e.form.diet,intolerances:e.form.intolerance,number:e.form.resnum});case 7:if(t=r.sent,console.log("response"),console.log(t),console.log("response.data"),console.log(t.data),"Found 0 search results"!=t.data){r.next=18;break}return e.no_res=!0,e.show_recipes=!1,r.abrupt("return");case 18:e.recipes=[],(i=e.recipes).push.apply(i,Object(a["a"])(t.data)),sessionStorage.username&&(sessionStorage.search=JSON.stringify(e.recipes),console.log("sessionStorage.search POST"),console.log(sessionStorage.search=JSON.stringify(e.recipes))),e.show_recipes=!1,setTimeout((function(){e.show_recipes=!0}),10);case 23:r.next=29;break;case 25:r.prev=25,r.t0=r["catch"](0),console.log(r.t0.response),e.form.submitError=r.t0.response.data.message;case 29:case"end":return r.stop()}}),r,null,[[0,25]])})))()},Sort:function(){var e=this;"Likes"==this.form.sortpick&&(this.recipes=this.recipes.sort((function(e,r){return e.aggregateLikes>r.aggregateLikes?-1:1})),console.log(this.recipes)),"Time to make"==this.form.sortpick&&(this.recipes=this.recipes.sort((function(e,r){return e.readyInMinutes>r.readyInMinutes?-1:1})),console.log(this.recipes)),sessionStorage.username&&(sessionStorage.search=JSON.stringify(this.recipes)),this.show_recipes=!1,setTimeout((function(){e.show_recipes=!0}),10)},onSearch:function(){this.$v.form.$touch(),this.$v.form.$anyError||this.Search()},onReset:function(){var e=this;this.form={recipename:"",cuisine:"Any",diet:"Any",intolerance:"Any",resnum:"5",sortpick:"None"},this.$nextTick((function(){e.$v.$reset()}))}},components:{RecipeViewerList:m["a"]}},f=p,b=(t("df3e"),t("2877")),h=Object(b["a"])(f,i,s,!1,null,"090af228",null);r["default"]=h.exports},4795:function(e,r,t){var i=t("23e7"),s=t("da84"),n=t("342f"),o=[].slice,a=/MSIE .\./.test(n),c=function(e){return function(r,t){var i=arguments.length>2,s=i?o.call(arguments,2):void 0;return e(i?function(){("function"==typeof r?r:Function(r)).apply(this,s)}:r,t)}};i({global:!0,bind:!0,forced:a},{setTimeout:c(s.setTimeout),setInterval:c(s.setInterval)})},"4e82":function(e,r,t){"use strict";var i=t("23e7"),s=t("1c0b"),n=t("7b0b"),o=t("d039"),a=t("a640"),c=[],l=c.sort,u=o((function(){c.sort(void 0)})),d=o((function(){c.sort(null)})),m=a("sort"),p=u||!d||!m;i({target:"Array",proto:!0,forced:p},{sort:function(e){return void 0===e?l.call(n(this)):l.call(n(this),s(e))}})},"8ae7":function(e,r,t){},df3e:function(e,r,t){"use strict";var i=t("8ae7"),s=t.n(i);s.a}}]);
//# sourceMappingURL=chunk-29001b52.70357f45.js.map